
# Obsidian Auto Timestamps Plugin

## 功能说明

这个插件用于自动为 Markdown 文档添加和更新时间戳信息。
- 创建时间(created)：在新建文档时自动添加，对于已有文档会读取文件的实际创建时间
- 修改时间(modified)：在文档被修改时自动更新，新文件创建时也会添加初始修改时间

## 主要特点

1. 只处理当前打开的活动文档，避免对未打开文档的不必要修改
2. 支持自定义更新时间间隔，避免频繁更新
3. 可分别启用/禁用创建时间和修改时间的自动添加功能
4. 对于没有创建时间的已有文档，会自动添加文件的实际创建时间
5. 对于没有修改时间的已有文档，会自动添加文件的实际修改时间
6. 新文件创建后首次编辑会立即更新修改时间，无需等待间隔
7. 采用防循环机制，确保插件的修改操作不会触发新的修改事件
8. 重启Obsidian后不会影响已有文档的时间戳

## 实现原理

- 使用 isInitializing 标志避免在Obsidian启动时处理文件
- 使用 processingFile 标志防止修改操作导致的事件循环
- 监听文件打开事件(file-open)，只为当前活动文档添加缺失的时间戳
- 监听文件创建事件(create)，同时添加创建时间和初始修改时间
- 监听文件修改事件(modify)，根据设定的时间间隔更新修改时间
- 文件创建时重置 lastModifiedTime 为 0，确保首次编辑会立即更新修改时间
- 使用 frontmatter 格式(YAML)在文档顶部存储时间信息
- 精确识别当前活动文件，只处理用户正在操作的文档
